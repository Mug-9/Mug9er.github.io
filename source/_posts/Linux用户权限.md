---
title: Linux用户权限
mathjax: true
categories:
  - Linux
tags:
  - 用户权限
abbrlink: e7492e71
date: 2021-04-27 21:53:40
---

<meta name = "referrer" content = "no-referrer" />

![](https://wx2.sinaimg.cn/mw690/0083TyOJly1gpyn9tfvhsj31hc0u0b2b.jpg)

<!-- less -->

# Linux 用户权限

## 用户

### 查看当前用户`whoami`

`whoami`该命令用户查看当前系统帐号的用户名，可通过`cat /etc/passwd`查看系统用户信息。

由于系统管理员通常需要使用多种身份登录系统，例如通常使用普通用户登录系统，然后再以`su`命令切换到`root`身份对传统进行管理，这时就可以使用`whoami`来查看当前用户身份。

### 查看登录用户 `who`

`who`命令用户查看当前所有登录系统的用户信息

常用选项

|       选项        |                          含义                          |
| :---------------: | :----------------------------------------------------: |
|   `-m`或`am I`    |      只显示运行`who`的用户名，登录终端和登录时间       |
|  `-q`或`--count`  |          只显示用户的登录帐号和登录用户的数量          |
|       `-u`        | 在登录时间后显示该用户最后一次操作到当前时间的时间间隔 |
| `-u`或`--heading` |                       显示列标题                       |

### 查看登录用户 `w`

`w`命令也可以查看登录当前系统的用户信息，与`who`命令相比，`w`命令的功能更强大，它不但可以显示当前有哪些用户登录到系统，还可以显示这些用户正在进行的操作，并给出更加详细和科学的统计数据。

```shell
w [选项] [用户名]	
```

如果`w`命令携带用户名，则只显示指定用户的信息，否则显示当前所有登录用户的信息。

常用选项

| 选项 |                        含义                        |
| :--: | :------------------------------------------------: |
| `-h` |  只显示运行`who`命令的用户名、登录终端和登录时间   |
| `-l` |            显示详细信息列表，此为预设值            |
| `-s` | 使用短列表，不显示用户登录时间、`JCPU`和`PCPU`时间 |
| `-u` |      忽略执行程序的程序，以及程序的`PCPU`时间      |

### 推出登录账户 `exit`

- 如果是图形界面，推出当前终端
- 如果是使用`ssh`远程登录，推出登录帐号
- 如果是切换后的登录用户，退场则返回上一个登录帐号

### 切换用户 `su`

可以通过`su`命令切换用户，`su`后面可以加`-`，`su`和`su -`命令不同之处在与，`su -`切换到对应的用户会将当前的工作目录自动切换到切换后用户主目录。

### 添加、删除组帐号：`groupadd、groupdel`

- `groupadd`新建组帐号

- `groupdel`删除组帐号

- `cat /etc/group` 查看用户组

  ```shell
  创建工作组： groupadd 组名
  删除工作组： groupdel 组名
  注意： 需要切换到 root用户
  ```

### 修改组 `usermod`

```shell
usermod -g 用户组 用户名
```

```shell
修改用户所在组：usermod -g 组名 用户名
```

### 添加用户帐号 `useradd`

在`Unix/Linux`中添加用户帐号可以使用`adduser`或`useradd`命令，因为`adduser`命令是指向`useradd`命令的一个链接，因此，这两个命令的使用格式完全一样。

```shell
useradd [参数] 新建用户帐号  
```

|      参数      |                             含义                             |
| :------------: | :----------------------------------------------------------: |
| `-d <dirname>` | 指定用户登录系统时的主目录，如果不使用该参数，系统自动在`/home`目录下建立与用户名同名目录为主目录 |
|      `-m`      |                         自动建立目录                         |
|      `-g`      |                          指定组名称                          |

### 修改文件权限 `chmod`

`chmod`修改文件权限有两种使用格式：字母法和数字法

```shell
字母法：chmod u/g/o/a +/-/= rwx 文件
```

| `u/g/o/a` |                             含义                             |
| :-------: | :----------------------------------------------------------: |
|    `u`    |                    `user`表示该文件所有者                    |
|    `g`    | `group`表示与该文件的所有者属于同一组（`group`）者，及用户组 |
|    `o`    |                   `other`表示其他以外的人                    |
|    `a`    |                     `all`表示这三者皆是                      |

| `+-=` |   含义   |
| :---: | :------: |
|  `+`  | 增加权限 |
|  `-`  | 撤销权限 |
|  `=`  | 设定权限 |

| `rwx` |                             含义                             |
| :---: | :----------------------------------------------------------: |
|  `r`  | `read`表示可读取，对于一个目录，如果没有`r`权限，那么就意味这不能通过`ls`查看这个目录的内容 |
|  `w`  | `wriet`表示可写入，对于一个目录，如果没有`w`权限，那么就意味着不能在目录下创建新文件 |
|  `x`  | `excute`表示可执行，对于一个目录，如果没有`x`权限，那么就意味着不能通过`cd`进入这个目录 |

```shell
数字法： rwx 这些权限可以用数字代替
r: 读取权限，数字代号为 4
w：写入权限，数字代号为 2
x：执行权限，数字代号为 1
chmod 741 file -R （-R 代表递归给目录加上相同的权限）
```

### 修改文件所有者 `chown`

```shell
chown 用户名 文件或目录名
```

### 修改文件所属组 `chgrp`

```shell
chgrp 用户组名 文件或目录名
```



